# Waterwheel Monitoring System

Program to monitor frequency of power generated by waterwheel

Prints frequency every 1.2 seconds along with a 12 second moving average
Waterwheel rotates at approx 10rpm ie 6sec per rotation

Program for monitoring frequency from RS PRO 1 Phase Backlit LCD Energy Meter, Type Energy Meter RS Stock No. 236-9298
Interface via Modbus

Reference: Modbus Guide (aka ICD)
RS PRO DIN Rail Multifunction Power Meter
MID Certified
Stock No: 236-9298

Underspeed threshold at 44Hz average and overspeed threshold at 48Hz average, with audio warning when either of these thresholds are crossed.

Hardcoded to use COM4

## Credits

- https://batchloaf.wordpress.com/2013/02/13/writing-bytes-to-a-serial-port-in-c/   writing data
- https://gist.github.com/uilianries/2a5ee873f1064efb192a6f4ea016a3c0   for reading data
- https://ideone.com/ridffw char to float conversion
- https://stackoverflow.com/questions/51409965/convert-char-to-float-using-union-or-memcpy char to float conversion
- https://www.geeksforgeeks.org/time-delay-c/  for time delays

## Compilation

To compile with MinGW:

    $ g++ -o <filename>.exe <filename>.c


To run:

    $ <filename>.exe  //.exe optional
